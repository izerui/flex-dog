(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d14ce94"],{"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"169a":function(t,e,n){"use strict";n("6ec0");var i=n("c69d"),a=n("30d4"),r=n("14ec"),s=n("e949"),o=n("261e"),c=n("98a1"),l=n("c584"),u=n("80d2"),h=n("bfc5"),d=n("d9bd"),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e["a"]={name:"v-dialog",directives:{ClickOutside:l["a"]},mixins:[i["a"],a["a"],r["a"],s["a"],o["a"],c["a"]],props:{disabled:Boolean,persistent:Boolean,fullscreen:Boolean,fullWidth:Boolean,noClickAnimation:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[String,Number],default:"none"},origin:{type:String,default:"center center"},width:{type:[String,Number],default:"auto"},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"}},data:function(){return{animate:!1,animateTimeout:null,stackClass:"v-dialog__content--active",stackMinZIndex:200}},computed:{classes:function(){var t;return t={},f(t,("v-dialog "+this.contentClass).trim(),!0),f(t,"v-dialog--active",this.isActive),f(t,"v-dialog--persistent",this.persistent),f(t,"v-dialog--fullscreen",this.fullscreen),f(t,"v-dialog--scrollable",this.scrollable),f(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){t?(this.show(),this.hideScroll()):this.removeOverlay()},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},beforeMount:function(){var t=this;this.$nextTick(function(){t.isBooted=t.isActive,t.isActive&&t.show()})},mounted:function(){"v-slot"===Object(u["l"])(this,"activator",!0)&&Object(d["a"])("v-dialog's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick(function(){t.animate=!0,clearTimeout(t.animateTimeout),t.animateTimeout=setTimeout(function(){return t.animate=!1},150)})},closeConditional:function(t){return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(t.target))&&(this.persistent?(this.noClickAnimation||this.overlay!==t.target||this.animateClick(),!1):this.activeZIndex>=this.getMaxZIndex())},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):r["a"].options.methods.hideScroll.call(this)},show:function(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$refs.content.focus()},onKeydown:function(t){if(t.keyCode===u["p"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick(function(){return e&&e.focus()})}this.$emit("keydown",t)},getActivator:function(t){if(this.$refs.activator)return this.$refs.activator.children.length>0?this.$refs.activator.children[0]:this.$refs.activator;if(t&&(this.activatedBy=t.currentTarget||t.target),this.activatedBy)return this.activatedBy;if(this.activatorNode){var e=Array.isArray(this.activatorNode)?this.activatorNode[0]:this.activatorNode,n=e&&e.elm;if(n)return n}return null},genActivator:function(){var t=this;if(!this.hasActivator)return null;var e=this.disabled?{}:{click:function(e){e.stopPropagation(),t.getActivator(e),t.disabled||(t.isActive=!t.isActive)}};if("scoped"===Object(u["l"])(this,"activator")){var n=this.$scopedSlots.activator({on:e});return this.activatorNode=n,n}return this.$createElement("div",{staticClass:"v-dialog__activator",class:{"v-dialog__activator--disabled":this.disabled},ref:"activator",on:e},this.$slots.activator)}},render:function(t){var e=this,n=[],i={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:function(){e.isActive=!1},args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],on:{click:function(t){t.stopPropagation()}}};this.fullscreen||(i.style={maxWidth:"none"===this.maxWidth?void 0:Object(u["c"])(this.maxWidth),width:"auto"===this.width?void 0:Object(u["c"])(this.width)}),n.push(this.genActivator());var a=t("div",i,this.showLazyContent(this.$slots.default));return this.transition&&(a=t("transition",{props:{name:this.transition,origin:this.origin}},[a])),n.push(t("div",{class:this.contentClasses,attrs:v({tabIndex:"-1"},this.getScopeIdAttrs()),on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.$createElement(h["a"],{props:{root:!0,light:this.light,dark:this.dark}},[a])])),t("div",{staticClass:"v-dialog__container",style:{display:!this.hasActivator||this.fullWidth?"block":"inline-block"}},n)}}},"214f":function(t,e,n){"use strict";n("b0c5");var i=n("2aba"),a=n("32e9"),r=n("79e5"),s=n("be13"),o=n("2b4c"),c=n("520a"),l=o("species"),u=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=o(t),v=!r(function(){var e={};return e[d]=function(){return 7},7!=""[t](e)}),f=v?!r(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[l]=function(){return n}),n[d](""),!e}):void 0;if(!v||!f||"replace"===t&&!u||"split"===t&&!h){var p=/./[d],g=n(s,d,""[t],function(t,e,n,i,a){return e.exec===c?v&&!a?{done:!0,value:p.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),m=g[0],b=g[1];i(String.prototype,t,m),a(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"386d":function(t,e,n){"use strict";var i=n("cb7c"),a=n("83a1"),r=n("5f1b");n("214f")("search",1,function(t,e,n,s){return[function(n){var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=s(n,t,this);if(e.done)return e.value;var o=i(t),c=String(this),l=o.lastIndex;a(l,0)||(o.lastIndex=0);var u=r(o,c);return a(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]})},"520a":function(t,e,n){"use strict";var i=n("0bfb"),a=RegExp.prototype.exec,r=String.prototype.replace,s=a,o="lastIndex",c=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[o]||0!==e[o]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(s=function(t){var e,n,s,u,h=this;return l&&(n=new RegExp("^"+h.source+"$(?!\\s)",i.call(h))),c&&(e=h[o]),s=a.call(h,t),c&&s&&(h[o]=h.global?s.index+s[0].length:e),l&&s&&s.length>1&&r.call(s[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s}),t.exports=s},"5f1b":function(t,e,n){"use strict";var i=n("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var r=n.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"6ec0":function(t,e,n){},"7f7f":function(t,e,n){var i=n("86cc").f,a=Function.prototype,r=/^\s*function ([^ (]*)/,s="name";s in a||n("9e1e")&&i(a,s,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},8460:function(t,e,n){},b0c5:function(t,e,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},d085:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-toolbar",{attrs:{card:"",prominent:""}},[n("v-label",[t._v("企业:  ")]),n("v-combobox",{attrs:{items:t.entNames,"persistent-hint":"",chips:""},model:{value:t.selEntName,callback:function(e){t.selEntName=e},expression:"selEntName"}}),n("v-spacer"),n("v-text-field",{attrs:{label:"货品编码","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("v-btn",{attrs:{loading:t.loading,color:"primary"},on:{click:t.loadData}},[n("v-icon",{attrs:{left:"",dark:""}},[t._v("search")]),t._v("\n            搜索\n        ")],1)],1),n("v-data-table",{attrs:{headers:t.headers,items:t.dataList,loading:t.loading,pagination:t.pagination,"total-items":t.pagination.totalItems,expand:t.expand,"item-key":"inventoryCode","fix-header":"","hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",{on:{click:function(t){e.expanded=!e.expanded}}},[n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.inventoryCode))]),n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.inventoryName))]),n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.unitName))]),n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.totalDemandQty))]),n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.totalPurgeQty))]),n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.stockQty))]),n("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.usableQty))])])]}},{key:"expand",fn:function(e){return[n("v-card",{attrs:{flat:""}},[n("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(n){return t.pushLack(e.item)}}},[n("v-icon",{attrs:{dark:""}},[t._v("pan_tool")]),t._v("\n                    推送缺料\n                ")],1),n("v-btn",{attrs:{small:"",color:"primary"}},[n("v-icon",{attrs:{dark:""}},[t._v("list")]),t._v("\n                    需求分配\n                ")],1),n("v-btn",{attrs:{small:"",color:"primary"}},[n("v-icon",{attrs:{dark:""}},[t._v("visibility")]),t._v("\n                    需求日志\n                ")],1),n("v-btn",{attrs:{small:"",color:"primary"}},[n("v-icon",{attrs:{dark:""}},[t._v("toc")]),t._v("\n                    出入库记录\n                ")],1)],1)]}}])}),n("div",{staticClass:"text-xs-center pt-2"},[n("v-pagination",{attrs:{"total-visible":7,length:t.pagination.totalPages},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1),n("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.showUserSelector,callback:function(e){t.showUserSelector=e},expression:"showUserSelector"}},[n("UserSelectorDialog",{ref:"userSelector",on:{close:function(e){t.showUserSelector=!1},confirm:t.userSelected}})],1)],1)},a=[],r=(n("386d"),n("7f7f"),n("96cf"),n("3b8d")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{tile:""}},[n("v-toolbar",{attrs:{dense:"",card:"",dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:t.cancel}},[n("v-icon",[t._v("close")])],1),n("v-toolbar-title",[t._v("指定操作人")]),n("v-spacer"),n("v-toolbar-items",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{icon:""},on:{click:t.confirm}},i),[n("v-icon",[t._v("check_circle_outline")])],1)]}}])},[n("span",[t._v("确认")])])],1)],1),n("v-card",{staticClass:"d-flex flex-row mb-2",attrs:{color:"grey lighten-2",flat:"",tile:""}},[n("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[n("v-list",t._l(t.roles,function(e){return n("v-list-tile",{key:e.code,on:{click:function(n){return t.loadUsers(e)}}},[n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:t._s(e.name)}})],1)],1)}),1)],1),n("v-card",{staticClass:"pa-2",attrs:{outlined:"",tile:""}},[n("v-data-table",{attrs:{headers:t.headers,items:t.users,"hide-actions":!0,pagination:t.pagination,"fix-header":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",[n("td",[t._v(t._s(e.item.name))]),n("td",[t._v(t._s(e.item.createDate))])])]}}])})],1)],1)],1)},o=[],c={name:"VerificationDialog",props:{entCode:{type:String,default:""}},data:function(){return{roles:[],users:[],headers:[{text:"名称",value:"name"},{text:"创建时间",value:"createDate"}],pagination:{descending:!1,page:1,rowsPerPage:-1,sortBy:null,totalItems:0}}},created:function(){},methods:{confirm:function(){this.$emit("confirm",this.phone,this.code)},cancel:function(){this.$emit("close")},initData:function(t){var e=this;this.roles=[],this.users=[],this.$fly.get("/api/v1/roles",{entCode:t}).then(function(t){e.roles=t.data})},loadUsers:function(t){var e=this;this.users=[],this.$fly.get("/api/v1/users",{entCode:t.entCode,roleCode:t.code}).then(function(t){e.users=t.data})}}},l=c,u=n("2877"),h=n("6544"),d=n.n(h),v=n("8336"),f=n("b0af"),p=n("8fea"),g=n("132d"),m=n("8860"),b=n("ba95"),x=n("5d23"),y=n("9910"),_=n("71d9"),k=n("2a7f"),w=n("3a2f"),C=Object(u["a"])(l,s,o,!1,null,"a8b95c86",null),$=C.exports;d()(C,{VBtn:v["a"],VCard:f["a"],VDataTable:p["a"],VIcon:g["a"],VList:m["a"],VListTile:b["a"],VListTileContent:x["a"],VListTileTitle:x["b"],VSpacer:y["a"],VToolbar:_["a"],VToolbarItems:k["a"],VToolbarTitle:k["b"],VTooltip:w["a"]});var S={components:{UserSelectorDialog:$},data:function(){return{selEntName:"",ents:[],entNames:[],search:"",expand:!1,headers:[{text:"货品编码",align:"left",value:"inventoryCode"},{text:"货品名称",value:"inventoryName"},{text:"单位",value:"unitName"},{text:"总需",value:"totalDemandQty"},{text:"总净需",value:"totalPurgeQty"},{text:"库存量",value:"stockQty"},{text:"可用量",value:"usableQty"}],dataList:[],loading:!1,pagination:{descending:!1,page:1,rowsPerPage:10,sortBy:null,totalItems:0,totalPages:0},showUserSelector:!1}},created:function(){this.loadEnts()},watch:{pagination:{handler:function(){this.loadData()},deep:!0}},methods:{userSelected:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),pushLack:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.showUserSelector=!0,this.$refs.userSelector.initData(this.getEntCode());case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),loadEnts:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$fly.get("/api/v1/ents");case 2:e=t.sent,this.ents=e.data,this.entNames=this.ents.map(function(t){return t.name});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getEntCode:function(){var t=this,e=this.ents.filter(function(e){return e.name===t.selEntName});return null!==e&&e.length>0?e[0].code:null},loadData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.getEntCode(),!e){t.next=12;break}return this.loading=!0,n={entCode:e,page:this.pagination.page-1,pageSize:this.pagination.rowsPerPage,keyword:this.search},t.next=6,this.$fly.get("/api/v1/demands",n);case 6:i=t.sent,this.dataList=i.data.content,i.data.number&&i.data.number>=0&&(this.pagination.page=i.data.number+1),this.pagination.totalPages=i.data.totalPages,this.pagination.totalItems=i.data.totalElements,this.loading=!1;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},I=S,A=n("2b5d"),E=n("169a"),O=n("24c9"),T=(n("8460"),n("9d26")),V=n("0d3d"),N=n("58df"),B=n("b64a"),R=n("6a18"),j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function D(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var P=Object(N["a"])(B["a"],R["a"]).extend({name:"v-pagination",directives:{Resize:V["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(t){return t%1===0}},totalVisible:[Number,String],nextIcon:{type:String,default:"$vuetify.icons.next"},prevIcon:{type:String,default:"$vuetify.icons.prev"},value:{type:Number,default:0}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return j({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var t=parseInt(this.totalVisible,10)||this.maxButtons;if(this.length<=t)return this.range(1,this.length);var e=t%2===0?1:0,n=Math.floor(t/2),i=this.length-n+1+e;if(this.value>n&&this.value<i){var a=this.value-n+2,r=this.value+n-2-e;return[1,"..."].concat(D(this.range(a,r)),["...",this.length])}if(this.value===n){var s=this.value+n-1-e;return[].concat(D(this.range(1,s)),["...",this.length])}if(this.value===i){var o=this.value-n+1;return[1,"..."].concat(D(this.range(o,this.length)))}return[].concat(D(this.range(1,n)),["..."],D(this.range(i,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.selected=null,this.$nextTick(this.onResize),setTimeout(function(){return t.selected=t.value},100)},onResize:function(){var t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next:function(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(t,e){var n=[];t=t>0?t:1;for(var i=t;i<=e;i++)n.push(i);return n},genIcon:function(t,e,n,i){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":n},attrs:{type:"button"},on:n?{}:{click:i}},[t(T["a"],[e])])])},genItem:function(t,e){var n=this,i=e===this.value&&(this.color||"primary");return t("button",this.setBackgroundColor(i,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button"},on:{click:function(){return n.$emit("input",e)}}}),[e.toString()])},genItems:function(t){var e=this;return this.items.map(function(n,i){return t("li",{key:i},[isNaN(Number(n))?t("span",{class:"v-pagination__more"},[n.toString()]):e.genItem(t,n)])})}},render:function(t){var e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next)];return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}}),L=n("2677"),U=Object(u["a"])(I,i,a,!1,null,"087d9977",null);e["default"]=U.exports;d()(U,{VBtn:v["a"],VCard:f["a"],VCombobox:A["a"],VDataTable:p["a"],VDialog:E["a"],VIcon:g["a"],VLabel:O["a"],VPagination:P,VSpacer:y["a"],VTextField:L["a"],VToolbar:_["a"]})}}]);
//# sourceMappingURL=chunk-8d14ce94.143081df.js.map